<!DOCTYPE html>
<html>
	<head>
		<meta charset="UTF-8">
		<meta name="viewport" content="width=device-width,initial-scale=1.0,maximum-scale=1.0,user-scalable=no"/>
		<link href="css/bootstrap-grid.min.css" rel="stylesheet"/>
		<link href="css/bootstrap-reboot.min.css" rel="stylesheet"/>
		<link href="css/bootstrap.min.css" rel="stylesheet"/>
		<title></title>
	</head>
 
	<body>
 
		<div style="margin: 20px;">
 
			<select id="queryProvince" class="selectpicker" data-live-search="true" value="" onchange="showCities()">
				<option data-tokens="ketchup mustard" value="-1">请选择省</option>
			</select>
 
			<select id="queryCity" class="selectpicker" data-live-search="true" value="" onchange="showCounty()">
				<option data-tokens="ketchup mustard" value="">请选择市</option>
			</select>
 
			<select id="queryCounty" class="selectpicker" data-live-search="true" value="">
				<option data-tokens="ketchup mustard" value="">请选择县区</option>
			</select>
 
		</div>
    </body>
    <script src="./js/jquery.js" type="text/jscript"></script>
    <script src="./js/bootstrap.bundle.min.js"></script>
    <script src="./js/bootstrap.min.js"></script>
    <script>
        var provinceArr = new Array();
        var cityArr;
        var $selectProvince;
        var $selectCounty;
        var $selectCity;

        $(function() {

            $selectProvince = $("#queryProvince");
            $selectCounty = $("#queryCounty");
            $selectCity = $("#queryCity");
            getJson();

        });

        function getJson() {
                                //加载本地的json文件
            $.getJSON("js/address.json", function(data) {

                $.each(data, function(index, info) {

                    provinceArr[index] = info;

                    var $option = $("<option>" + info.area_name + "</option>");

                    $option.val(index);

                    $option.appendTo($selectProvince);

                });

            });

        }

        function showCities() {

            cityArr = new Array();

            var cityJson = provinceArr[$selectProvince.val()].city //获取当前省的所有市区的数据
        
            $selectCity.empty();

            $selectCounty.empty();

            $.each(cityJson, function(i, data) {

                cityArr[i] = data;

                var $option = $("<option>" + data.area_name + "</option>");

                $option.val(i);

                $selectCity.append($option);

            });
            
            showCounty();
        }

        function showCounty() {

                            $selectCounty.empty();
                
            var countyJson = cityArr[$("#queryCity").val()].district //获取当前市的所有区的数据

            $.each(countyJson, function(i, data) {

                var $option = $("<option>" + data.area_name + "</option>");

                $option.val(i);

                $selectCounty.append($option);

            });

        }
    </script>
 
</html>
